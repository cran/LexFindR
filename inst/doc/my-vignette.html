<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="ZhaoBin Li, Anne Marie Crinnion, and James S. Magnuson" />

<meta name="date" content="2024-06-16" />

<title>LexFindR vignette</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">LexFindR vignette</h1>
<h4 class="author">ZhaoBin Li, Anne Marie Crinnion, and James S.
Magnuson</h4>
<h4 class="date">2024-06-16</h4>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(LexFindR)</span></code></pre></div>
<div id="overview" class="section level1">
<h1>Overview</h1>
<p>The LexFindR package implements R code to get various competitor
types studied in psycholinguistics, including cohorts
(<em>get_cohorts</em>), rhymes (<em>get_rhymes</em>), neighbors
(<em>get_neighbors</em>), and words that embed within a target word
(<em>get_embeds_in_target</em>) and words a target word embeds into
(<em>get_target_embeds_in</em>).</p>
<p>The code uses regular expressions and balances speed and readability.
By default, it is designed to handle complete pronunciation
transcriptions (e.g., <em>ARPAbet</em>), in which pronunciations are
coded in one or more ASCII characters separated by spaces. However, you
can also use forms without delimiters, using the <em>sep = ““</em>
argument when appropriate. As shown in the vignette, alternative
transcriptions can be easily converted to the designed
transcriptions.</p>
</div>
<div id="installation" class="section level1">
<h1>Installation</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Install LexFindR from CRAN</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;LexFindR&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># Or the development version from GitHub:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;maglab-uconn/LexFindR&quot;</span>)</span></code></pre></div>
</div>
<div id="getting-started" class="section level1">
<h1>Getting started</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(LexFindR)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># Get cohort index of ark in dictionary of ark, art and bab</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="st">&quot;AA R K&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>lexicon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AA R K&quot;</span>, <span class="st">&quot;AA R T&quot;</span>, <span class="st">&quot;B AA B&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>cohort <span class="ot">&lt;-</span> <span class="fu">get_cohorts</span>(target, lexicon)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>cohort</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; [1] 1 2</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># To get forms rather than indices using base R</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>lexicon[cohort]</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA R K&quot; &quot;AA R T&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># To get forms rather than indices using the form option</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">get_cohorts</span>(target, lexicon, <span class="at">form =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA R K&quot; &quot;AA R T&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># Get count using base R</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">length</span>(cohort)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co"># Get count using the count option</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">get_cohorts</span>(target, lexicon, <span class="at">count =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># Frequency weighting</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>target_freq <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>lexicon_freq <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">274</span>, <span class="dv">45</span>)</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co"># get the summed log frequencies of competitors</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="fu">get_fw</span>(lexicon_freq)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co">#&gt; [1] 13.33181</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">get_fwcp</span>(target_freq, lexicon_freq)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt; [1] 0.2934352</span></span></code></pre></div>
<div id="note-on-using-arpabet-from-the-cmu-pronouncing-dictionary" class="section level2">
<h2>NOTE: On using ARPABET from the CMU Pronouncing Dictionary</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># By default, CMU has numbers that indicate stress patterns</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co"># If you do not strip those out, instances of the same vowel</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># with different stress numbers will be treated as different</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co"># symbols. This may be useful for some purposes (e.g., finding</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co"># cohorts or neighbors with the same stress pattern).</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co"># Here is a contrived example, where ARK will not be considered</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co"># related to ART or BARK because of stress pattern differences</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="st">&quot;AA0 R K&quot;</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>lexicon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AA0 R K&quot;</span>, <span class="st">&quot;AA2 R T&quot;</span>, <span class="st">&quot;B AA3 R K&quot;</span>)</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="fu">get_cohorts</span>(target, lexicon, <span class="at">form =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA0 R K&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">get_neighbors</span>(target, lexicon, <span class="at">form =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA0 R K&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co"># If this is not the behavior we want, we can strip lexical </span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co"># stress indicators using regular expressions</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span>, <span class="st">&quot;&quot;</span>, target)</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>lexicon <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span>, <span class="st">&quot;&quot;</span>, lexicon)</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="fu">print</span>(target)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA R K&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">print</span>(lexicon)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA R K&quot;   &quot;AA R T&quot;   &quot;B AA R K&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">get_cohorts</span>(target, lexicon, <span class="at">form =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA R K&quot; &quot;AA R T&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">get_neighbors</span>(target, lexicon, <span class="at">form =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;AA R K&quot;   &quot;AA R T&quot;   &quot;B AA R K&quot;</span></span></code></pre></div>
</div>
</div>
<div id="example-cohorts-with-the-trace-slex-lexicon" class="section level1">
<h1>EXAMPLE: cohorts with the TRACE <em>slex</em> lexicon</h1>
<p>This example shows how to do multiple steps at once.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">#&gt; ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co">#&gt; ✔ dplyr     1.1.4     ✔ readr     2.1.5</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co">#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.1</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co">#&gt; ✔ ggplot2   3.5.1     ✔ tibble    3.2.1</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co">#&gt; ✔ lubridate 1.9.3     ✔ tidyr     1.3.1</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co">#&gt; ✔ purrr     1.0.2     </span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="co">#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">glimpse</span>(slex)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; Rows: 212</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co">#&gt; Columns: 3</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co">#&gt; $ Item          &lt;chr&gt; &quot;ad&quot;, &quot;ar&quot;, &quot;ark&quot;, &quot;art&quot;, &quot;art^st&quot;, &quot;bab&quot;, &quot;babi&quot;, &quot;badi…</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co">#&gt; $ Pronunciation &lt;chr&gt; &quot;AA D&quot;, &quot;AA R&quot;, &quot;AA R K&quot;, &quot;AA R T&quot;, &quot;AA R T AH S T&quot;, &quot;B …</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co">#&gt; $ Frequency     &lt;int&gt; 53, 4406, 50, 274, 112, 45, 23, 341, 87, 125, 125, 95, 6…</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co"># define the lexicon with the list of target words to compute</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co"># cohorts for; we will use *target_df* instead of modifying</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co"># slex or lemmalex directly</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>target_df <span class="ot">&lt;-</span> slex</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co"># specify the reference lexicon; here it is actually the list</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="co"># of pronunciations from slex, as we want to find all cohorts</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="co"># for all words in our lexicon. It is not necessary to create</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="co"># a new dataframe, but because we find it useful for more</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co"># complex tasks, we use this approach here</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>lexicon_df <span class="ot">&lt;-</span> target_df</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="co"># this instruction will create a new column in our target_df</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="co"># dataframe, &quot;cohort_idx&quot;, which will be the list of lexicon_df</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="co"># indices corresponding to each word&#39;s cohort set</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>target_df<span class="sc">$</span>cohort_idx <span class="ot">&lt;-</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a>  <span class="fu">lapply</span>(</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>    <span class="co"># in each lapply instance, select the target pronunciation</span></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>    target_df<span class="sc">$</span>Pronunciation,</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a>    <span class="co"># in each lapply instance, apply the get_cohorts function</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>    <span class="at">FUN =</span> get_cohorts,</span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>    <span class="co"># in each lapply instance, compare the current target </span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>    <span class="co"># Pronunciation to each lexicon Pronunciation</span></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a>    <span class="at">lexicon =</span> lexicon_df<span class="sc">$</span>Pronunciation</span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a>  )</span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a><span class="co"># let&#39;s look at the first few instances in each field...</span></span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a><span class="fu">glimpse</span>(target_df)</span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a><span class="co">#&gt; Rows: 212</span></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a><span class="co">#&gt; Columns: 4</span></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a><span class="co">#&gt; $ Item          &lt;chr&gt; &quot;ad&quot;, &quot;ar&quot;, &quot;ark&quot;, &quot;art&quot;, &quot;art^st&quot;, &quot;bab&quot;, &quot;babi&quot;, &quot;badi…</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a><span class="co">#&gt; $ Pronunciation &lt;chr&gt; &quot;AA D&quot;, &quot;AA R&quot;, &quot;AA R K&quot;, &quot;AA R T&quot;, &quot;AA R T AH S T&quot;, &quot;B …</span></span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a><span class="co">#&gt; $ Frequency     &lt;int&gt; 53, 4406, 50, 274, 112, 45, 23, 341, 87, 125, 125, 95, 6…</span></span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a><span class="co">#&gt; $ cohort_idx    &lt;list&gt; 1, &lt;2, 3, 4, 5&gt;, &lt;2, 3, 4, 5&gt;, &lt;2, 3, 4, 5&gt;, &lt;2, 3, 4, …</span></span></code></pre></div>
</div>
<div id="example-rhymes-with-the-trace-slex-lexicon-and-tidyverse-piping-style" class="section level1">
<h1>EXAMPLE: rhymes with the TRACE slex lexicon and <em>tidyverse</em>
piping style</h1>
<p><em>tidyverse</em> piping style is more readable.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>slex_rhymes <span class="ot">&lt;-</span> slex <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  <span class="at">rhyme_idx =</span> <span class="fu">lapply</span>(Pronunciation, get_rhymes, <span class="at">lexicon =</span> Pronunciation),</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="at">rhyme_str =</span> <span class="fu">lapply</span>(rhyme_idx, <span class="cf">function</span>(idx) {</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    Item[idx]</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  }),</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>  <span class="at">rhyme_count =</span> <span class="fu">lengths</span>(rhyme_idx)</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>)</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="fu">glimpse</span>(slex_rhymes)</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co">#&gt; Rows: 212</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co">#&gt; Columns: 6</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="co">#&gt; $ Item          &lt;chr&gt; &quot;ad&quot;, &quot;ar&quot;, &quot;ark&quot;, &quot;art&quot;, &quot;art^st&quot;, &quot;bab&quot;, &quot;babi&quot;, &quot;badi…</span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co">#&gt; $ Pronunciation &lt;chr&gt; &quot;AA D&quot;, &quot;AA R&quot;, &quot;AA R K&quot;, &quot;AA R T&quot;, &quot;AA R T AH S T&quot;, &quot;B …</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co">#&gt; $ Frequency     &lt;int&gt; 53, 4406, 50, 274, 112, 45, 23, 341, 87, 125, 125, 95, 6…</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="co">#&gt; $ rhyme_idx     &lt;list&gt; &lt;1, 44, 130&gt;, &lt;2, 10, 69, 104, 184&gt;, &lt;3, 11, 29, 106&gt;, …</span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co">#&gt; $ rhyme_str     &lt;list&gt; &lt;&quot;ad&quot;, &quot;gad&quot;, &quot;rad&quot;&gt;, &lt;&quot;ar&quot;, &quot;bar&quot;, &quot;kar&quot;, &quot;par&quot;, &quot;tar&quot;…</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co">#&gt; $ rhyme_count   &lt;int&gt; 3, 5, 4, 3, 1, 2, 2, 1, 1, 5, 4, 1, 6, 3, 4, 3, 3, 1, 2,…</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>slex_rhymes <span class="ot">&lt;-</span> slex_rhymes <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    <span class="at">rhyme_freq =</span> <span class="fu">list</span>(slex<span class="sc">$</span>Frequency[rhyme_idx]),</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>    <span class="at">rhyme_fw =</span> <span class="fu">get_fw</span>(rhyme_freq),</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>    <span class="at">rhyme_fwcp =</span> <span class="fu">get_fwcp</span>(Frequency, rhyme_freq)</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="fu">glimpse</span>(slex_rhymes)</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="co">#&gt; Rows: 212</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="co">#&gt; Columns: 9</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="co">#&gt; $ Item          &lt;chr&gt; &quot;ad&quot;, &quot;ar&quot;, &quot;ark&quot;, &quot;art&quot;, &quot;art^st&quot;, &quot;bab&quot;, &quot;babi&quot;, &quot;badi…</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="co">#&gt; $ Pronunciation &lt;chr&gt; &quot;AA D&quot;, &quot;AA R&quot;, &quot;AA R K&quot;, &quot;AA R T&quot;, &quot;AA R T AH S T&quot;, &quot;B …</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="co">#&gt; $ Frequency     &lt;int&gt; 53, 4406, 50, 274, 112, 45, 23, 341, 87, 125, 125, 95, 6…</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="co">#&gt; $ rhyme_idx     &lt;list&gt; &lt;1, 44, 130&gt;, &lt;2, 10, 69, 104, 184&gt;, &lt;3, 11, 29, 106&gt;, …</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a><span class="co">#&gt; $ rhyme_str     &lt;list&gt; &lt;&quot;ad&quot;, &quot;gad&quot;, &quot;rad&quot;&gt;, &lt;&quot;ar&quot;, &quot;bar&quot;, &quot;kar&quot;, &quot;par&quot;, &quot;tar&quot;…</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="co">#&gt; $ rhyme_count   &lt;int&gt; 3, 5, 4, 3, 1, 2, 2, 1, 1, 5, 4, 1, 6, 3, 4, 3, 3, 1, 2,…</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a><span class="co">#&gt; $ rhyme_freq    &lt;list&gt; &lt;53, 332, 29&gt;, &lt;4406, 125, 386, 10, 20&gt;, &lt;50, 125, 234,…</span></span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a><span class="co">#&gt; $ rhyme_fw      &lt;dbl&gt; 13.142723, 24.473191, 19.684596, 15.046612, 4.718499, 7.…</span></span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a><span class="co">#&gt; $ rhyme_fwcp    &lt;dbl&gt; 0.3020905, 0.3428536, 0.1987352, 0.3730493, 1.0000000, 0…</span></span></code></pre></div>
</div>
<div id="example-using-parallelization" class="section level1">
<h1>EXAMPLE: Using parallelization</h1>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">library</span>(future.apply)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="co"># using two cores for demo or else </span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="co"># set `workers` to availableCores() to use all cores</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">2</span>)</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="fu">glimpse</span>(lemmalex)</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="co">#&gt; Rows: 17,750</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="co">#&gt; Columns: 3</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="co">#&gt; $ Item          &lt;chr&gt; &quot;a&quot;, &quot;abandon&quot;, &quot;abandonment&quot;, &quot;abate&quot;, &quot;abbey&quot;, &quot;abbot&quot;…</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a><span class="co">#&gt; $ Frequency     &lt;dbl&gt; 20415.27, 8.10, 0.96, 0.10, 3.18, 0.84, 0.02, 0.24, 3.35…</span></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="co">#&gt; $ Pronunciation &lt;chr&gt; &quot;AH&quot;, &quot;AH B AE N D IH N&quot;, &quot;AH B AE N D AH N M AH N T&quot;, &quot;…</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co"># the portion between tic and toc below takes ~X seconds on a </span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co"># 15-inch Macbook Pro 6-core i9; if you replace future_lapply </span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="co"># with lapply, it takes ~317 secs, v. 66 secs with future_lapply</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">&quot;Finding rhymes&quot;</span>)</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>slex_rhyme_lemmalex <span class="ot">&lt;-</span> lemmalex <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>  <span class="at">rhyme =</span> <span class="fu">future_lapply</span>(Pronunciation, get_rhymes, </span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a>                            <span class="at">lexicon =</span> lemmalex<span class="sc">$</span>Pronunciation),</span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a>  <span class="at">rhyme_str =</span> <span class="fu">lapply</span>(rhyme, <span class="cf">function</span>(idx) {</span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a>    lemmalex<span class="sc">$</span>Item[idx]</span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a>  }),</span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>  <span class="at">rhyme_len =</span> <span class="fu">lengths</span>(rhyme)</span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a>)</span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a><span class="fu">toc</span>()</span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a><span class="co">#&gt; Finding rhymes: 37.793 sec elapsed</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="fu">glimpse</span>(slex_rhyme_lemmalex)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="co">#&gt; Rows: 17,750</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co">#&gt; Columns: 6</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">#&gt; $ Item          &lt;chr&gt; &quot;a&quot;, &quot;abandon&quot;, &quot;abandonment&quot;, &quot;abate&quot;, &quot;abbey&quot;, &quot;abbot&quot;…</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="co">#&gt; $ Frequency     &lt;dbl&gt; 20415.27, 8.10, 0.96, 0.10, 3.18, 0.84, 0.02, 0.24, 3.35…</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="co">#&gt; $ Pronunciation &lt;chr&gt; &quot;AH&quot;, &quot;AH B AE N D IH N&quot;, &quot;AH B AE N D AH N M AH N T&quot;, &quot;…</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="co">#&gt; $ rhyme         &lt;list&gt; &lt;1, 8846, 15769&gt;, 2, 3, &lt;4, 1136&gt;, &lt;5, 1092, 1285, 1331…</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="co">#&gt; $ rhyme_str     &lt;list&gt; &lt;&quot;a&quot;, &quot;le&quot;, &quot;the&quot;&gt;, &quot;abandon&quot;, &quot;abandonment&quot;, &lt;&quot;abate&quot;,…</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a><span class="co">#&gt; $ rhyme_len     &lt;int&gt; 3, 1, 1, 2, 5, 3, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1,…</span></span></code></pre></div>
</div>
<div id="example-putting-it-all-together" class="section level1">
<h1>EXAMPLE: Putting it all together</h1>
<p>This extended example is from a paper describing LexFindR to be
submitted in Fall, 2020.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">library</span>(LexFindR)</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for glimpse</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="fu">library</span>(future.apply) <span class="co"># parallelization</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="fu">library</span>(tictoc) <span class="co"># timing utilities</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a><span class="co"># In this example, we define a dataframe source for target words</span></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a><span class="co"># (target_df) and another for the lexicon to compare the target</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a><span class="co"># words to (lexicon_df). Often, these will be the same, but we keep</span></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a><span class="co"># them separate here to make it easier for others to generalize from</span></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="co"># this example code.</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a><span class="co"># Code assumes you have at least 3 columns in target_df &amp; lexicon_df:</span></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a><span class="co"># 1. Item -- a label of some sort, can be identical to Pronunciation</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="co"># 2. Pronunciation -- typically a phonological form</span></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="co"># 3. Frequency -- should be in occurrences per million, or some other</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a><span class="co">#                 raw form, as the functions below take the log of</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a><span class="co">#                 the frequency form. See advice about padding in</span></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a><span class="co">#                 the main article text.</span></span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a><span class="co"># Of course, you can name your fields as you like, and edit the</span></span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a><span class="co"># field names below appropriately.</span></span>
<span id="cb24-22"><a href="#cb24-22" tabindex="-1"></a>target_df <span class="ot">&lt;-</span> slex</span>
<span id="cb24-23"><a href="#cb24-23" tabindex="-1"></a>lexicon_df <span class="ot">&lt;-</span> target_df</span>
<span id="cb24-24"><a href="#cb24-24" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" tabindex="-1"></a><span class="co"># Prepare for parallelizing</span></span>
<span id="cb24-26"><a href="#cb24-26" tabindex="-1"></a><span class="co"># 1. how many cores do we have?</span></span>
<span id="cb24-27"><a href="#cb24-27" tabindex="-1"></a><span class="co"># num_cores &lt;- availableCores()</span></span>
<span id="cb24-28"><a href="#cb24-28" tabindex="-1"></a></span>
<span id="cb24-29"><a href="#cb24-29" tabindex="-1"></a><span class="co"># using two cores for demo</span></span>
<span id="cb24-30"><a href="#cb24-30" tabindex="-1"></a>num_cores <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb24-31"><a href="#cb24-31" tabindex="-1"></a></span>
<span id="cb24-32"><a href="#cb24-32" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Using num_cores: &quot;</span>, num_cores))</span>
<span id="cb24-33"><a href="#cb24-33" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Using num_cores: 2&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># 2. now let future.apply figure out how to optimize parallel</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co">#    division of labor over cores</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> num_cores)</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="co"># the functions in this list all return lists of word indices; the</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="co"># uniqueness point function is not included because it returns a</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="co"># single value per word.</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>fun_list <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>  <span class="st">&quot;cohorts&quot;</span>, <span class="st">&quot;neighbors&quot;</span>,</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>  <span class="st">&quot;rhymes&quot;</span>, <span class="st">&quot;homoforms&quot;</span>,</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>  <span class="st">&quot;target_embeds_in&quot;</span>, <span class="st">&quot;embeds_in_target&quot;</span>,</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a>  <span class="st">&quot;nohorts&quot;</span>, <span class="st">&quot;cohortsP&quot;</span>, <span class="st">&quot;neighborsP&quot;</span>,</span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a>  <span class="st">&quot;target_embeds_inP&quot;</span>, <span class="st">&quot;embeds_in_targetP&quot;</span></span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a>)</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a><span class="co"># we need to keep track of the P variants, as we need to tell get_fwcp</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a><span class="co"># to add in the target frequency for these, as they exclude the target</span></span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a>Ps <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a>  <span class="st">&quot;cohortsP&quot;</span>, <span class="st">&quot;neighborsP&quot;</span>, <span class="st">&quot;target_embeds_inP&quot;</span>,</span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a>  <span class="st">&quot;embeds_in_targetP&quot;</span></span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a>)</span>
<span id="cb25-22"><a href="#cb25-22" tabindex="-1"></a></span>
<span id="cb25-23"><a href="#cb25-23" tabindex="-1"></a><span class="co"># determine how much to pad based on minimum frequency</span></span>
<span id="cb25-24"><a href="#cb25-24" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">min</span>(target_df<span class="sc">$</span>Frequency) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb25-25"><a href="#cb25-25" tabindex="-1"></a>  pad <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb25-26"><a href="#cb25-26" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">min</span>(target_df<span class="sc">$</span>Frequency) <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb25-27"><a href="#cb25-27" tabindex="-1"></a>  pad <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb25-28"><a href="#cb25-28" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb25-29"><a href="#cb25-29" tabindex="-1"></a>  pad <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb25-30"><a href="#cb25-30" tabindex="-1"></a>}</span>
<span id="cb25-31"><a href="#cb25-31" tabindex="-1"></a></span>
<span id="cb25-32"><a href="#cb25-32" tabindex="-1"></a><span class="co"># now let&#39;s loop through the functions</span></span>
<span id="cb25-33"><a href="#cb25-33" tabindex="-1"></a><span class="cf">for</span> (fun_name <span class="cf">in</span> fun_list) {</span>
<span id="cb25-34"><a href="#cb25-34" tabindex="-1"></a>  <span class="co"># start timer for this function</span></span>
<span id="cb25-35"><a href="#cb25-35" tabindex="-1"></a>  <span class="fu">tic</span>(fun_name)</span>
<span id="cb25-36"><a href="#cb25-36" tabindex="-1"></a></span>
<span id="cb25-37"><a href="#cb25-37" tabindex="-1"></a>  <span class="co"># the P functions do not include the target in the denominator for</span></span>
<span id="cb25-38"><a href="#cb25-38" tabindex="-1"></a>  <span class="co"># get_fwcp; if we want this to be a consistent ratio, we need to</span></span>
<span id="cb25-39"><a href="#cb25-39" tabindex="-1"></a>  <span class="co"># add target frequency to the denominator</span></span>
<span id="cb25-40"><a href="#cb25-40" tabindex="-1"></a>  add_target <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb25-41"><a href="#cb25-41" tabindex="-1"></a>  <span class="cf">if</span> (fun_name <span class="sc">%in%</span> Ps) {</span>
<span id="cb25-42"><a href="#cb25-42" tabindex="-1"></a>    add_target <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb25-43"><a href="#cb25-43" tabindex="-1"></a>  }</span>
<span id="cb25-44"><a href="#cb25-44" tabindex="-1"></a></span>
<span id="cb25-45"><a href="#cb25-45" tabindex="-1"></a>  <span class="co"># inform the user that we are starting the next function, make sure</span></span>
<span id="cb25-46"><a href="#cb25-46" tabindex="-1"></a>  <span class="co"># we are correctly adding target or not</span></span>
<span id="cb25-47"><a href="#cb25-47" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Starting&quot;</span>, fun_name, <span class="st">&quot; -- add_target = &quot;</span>, add_target)</span>
<span id="cb25-48"><a href="#cb25-48" tabindex="-1"></a>  func <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;get_&quot;</span>, fun_name)</span>
<span id="cb25-49"><a href="#cb25-49" tabindex="-1"></a></span>
<span id="cb25-50"><a href="#cb25-50" tabindex="-1"></a>  <span class="co"># use *future_lapply* to do the competitor search, creating</span></span>
<span id="cb25-51"><a href="#cb25-51" tabindex="-1"></a>  <span class="co"># a new column in *target_df* that will be this function&#39;s</span></span>
<span id="cb25-52"><a href="#cb25-52" tabindex="-1"></a>  <span class="co"># name + _idx (e.g., cohort_idx)</span></span>
<span id="cb25-53"><a href="#cb25-53" tabindex="-1"></a>  target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_idx&quot;</span>)]] <span class="ot">&lt;-</span></span>
<span id="cb25-54"><a href="#cb25-54" tabindex="-1"></a>    <span class="fu">future_lapply</span>(target_df<span class="sc">$</span>Pronunciation,</span>
<span id="cb25-55"><a href="#cb25-55" tabindex="-1"></a>      <span class="at">FUN =</span> <span class="fu">get</span>(func),</span>
<span id="cb25-56"><a href="#cb25-56" tabindex="-1"></a>      <span class="at">lexicon =</span> lexicon_df<span class="sc">$</span>Pronunciation</span>
<span id="cb25-57"><a href="#cb25-57" tabindex="-1"></a>    )</span>
<span id="cb25-58"><a href="#cb25-58" tabindex="-1"></a></span>
<span id="cb25-59"><a href="#cb25-59" tabindex="-1"></a>  <span class="co"># list the competitor form labels in functionname_str</span></span>
<span id="cb25-60"><a href="#cb25-60" tabindex="-1"></a>  target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_str&quot;</span>)]] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(</span>
<span id="cb25-61"><a href="#cb25-61" tabindex="-1"></a>    target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_idx&quot;</span>)]],</span>
<span id="cb25-62"><a href="#cb25-62" tabindex="-1"></a>    <span class="cf">function</span>(idx) {</span>
<span id="cb25-63"><a href="#cb25-63" tabindex="-1"></a>      lexicon_df<span class="sc">$</span>Item[idx]</span>
<span id="cb25-64"><a href="#cb25-64" tabindex="-1"></a>    }</span>
<span id="cb25-65"><a href="#cb25-65" tabindex="-1"></a>  )</span>
<span id="cb25-66"><a href="#cb25-66" tabindex="-1"></a></span>
<span id="cb25-67"><a href="#cb25-67" tabindex="-1"></a>  <span class="co"># list the competitor frequencies in functionname_freq</span></span>
<span id="cb25-68"><a href="#cb25-68" tabindex="-1"></a>  target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_freq&quot;</span>)]] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(</span>
<span id="cb25-69"><a href="#cb25-69" tabindex="-1"></a>    target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_idx&quot;</span>)]],</span>
<span id="cb25-70"><a href="#cb25-70" tabindex="-1"></a>    <span class="cf">function</span>(idx) {</span>
<span id="cb25-71"><a href="#cb25-71" tabindex="-1"></a>      lexicon_df<span class="sc">$</span>Frequency[idx]</span>
<span id="cb25-72"><a href="#cb25-72" tabindex="-1"></a>    }</span>
<span id="cb25-73"><a href="#cb25-73" tabindex="-1"></a>  )</span>
<span id="cb25-74"><a href="#cb25-74" tabindex="-1"></a></span>
<span id="cb25-75"><a href="#cb25-75" tabindex="-1"></a>  <span class="co"># put the count of competitors in functionname_num</span></span>
<span id="cb25-76"><a href="#cb25-76" tabindex="-1"></a>  target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_num&quot;</span>)]] <span class="ot">&lt;-</span></span>
<span id="cb25-77"><a href="#cb25-77" tabindex="-1"></a>    <span class="fu">lengths</span>(target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_idx&quot;</span>)]])</span>
<span id="cb25-78"><a href="#cb25-78" tabindex="-1"></a></span>
<span id="cb25-79"><a href="#cb25-79" tabindex="-1"></a>  <span class="co"># put the FW in functionname_fwt</span></span>
<span id="cb25-80"><a href="#cb25-80" tabindex="-1"></a>  target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_fwt&quot;</span>)]] <span class="ot">&lt;-</span></span>
<span id="cb25-81"><a href="#cb25-81" tabindex="-1"></a>    <span class="fu">mapply</span>(get_fw,</span>
<span id="cb25-82"><a href="#cb25-82" tabindex="-1"></a>      <span class="at">competitors_freq =</span> target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_freq&quot;</span>)]],</span>
<span id="cb25-83"><a href="#cb25-83" tabindex="-1"></a>      <span class="at">pad =</span> pad</span>
<span id="cb25-84"><a href="#cb25-84" tabindex="-1"></a>    )</span>
<span id="cb25-85"><a href="#cb25-85" tabindex="-1"></a></span>
<span id="cb25-86"><a href="#cb25-86" tabindex="-1"></a>  <span class="co"># put the FWCP in functionname_fwcp</span></span>
<span id="cb25-87"><a href="#cb25-87" tabindex="-1"></a>  target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_fwcp&quot;</span>)]] <span class="ot">&lt;-</span></span>
<span id="cb25-88"><a href="#cb25-88" tabindex="-1"></a>    <span class="fu">mapply</span>(get_fwcp,</span>
<span id="cb25-89"><a href="#cb25-89" tabindex="-1"></a>      <span class="at">target_freq =</span> target_df<span class="sc">$</span>Frequency,</span>
<span id="cb25-90"><a href="#cb25-90" tabindex="-1"></a>      <span class="at">competitors_freq =</span> target_df[[<span class="fu">paste0</span>(fun_name, <span class="st">&quot;_freq&quot;</span>)]],</span>
<span id="cb25-91"><a href="#cb25-91" tabindex="-1"></a>      <span class="at">pad =</span> pad, <span class="at">add_target =</span> add_target</span>
<span id="cb25-92"><a href="#cb25-92" tabindex="-1"></a>    )</span>
<span id="cb25-93"><a href="#cb25-93" tabindex="-1"></a></span>
<span id="cb25-94"><a href="#cb25-94" tabindex="-1"></a>  <span class="fu">toc</span>()</span>
<span id="cb25-95"><a href="#cb25-95" tabindex="-1"></a>}</span>
<span id="cb25-96"><a href="#cb25-96" tabindex="-1"></a><span class="co">#&gt; Starting cohorts  -- add_target =  FALSEcohorts: 0.084 sec elapsed</span></span>
<span id="cb25-97"><a href="#cb25-97" tabindex="-1"></a><span class="co">#&gt; Starting neighbors  -- add_target =  FALSEneighbors: 0.067 sec elapsed</span></span>
<span id="cb25-98"><a href="#cb25-98" tabindex="-1"></a><span class="co">#&gt; Starting rhymes  -- add_target =  FALSErhymes: 0.043 sec elapsed</span></span>
<span id="cb25-99"><a href="#cb25-99" tabindex="-1"></a><span class="co">#&gt; Starting homoforms  -- add_target =  FALSEhomoforms: 0.035 sec elapsed</span></span>
<span id="cb25-100"><a href="#cb25-100" tabindex="-1"></a><span class="co">#&gt; Starting target_embeds_in  -- add_target =  FALSEtarget_embeds_in: 0.039 sec elapsed</span></span>
<span id="cb25-101"><a href="#cb25-101" tabindex="-1"></a><span class="co">#&gt; Starting embeds_in_target  -- add_target =  FALSEembeds_in_target: 0.042 sec elapsed</span></span>
<span id="cb25-102"><a href="#cb25-102" tabindex="-1"></a><span class="co">#&gt; Starting nohorts  -- add_target =  FALSEnohorts: 0.059 sec elapsed</span></span>
<span id="cb25-103"><a href="#cb25-103" tabindex="-1"></a><span class="co">#&gt; Starting cohortsP  -- add_target =  TRUEcohortsP: 0.06 sec elapsed</span></span>
<span id="cb25-104"><a href="#cb25-104" tabindex="-1"></a><span class="co">#&gt; Starting neighborsP  -- add_target =  TRUEneighborsP: 0.073 sec elapsed</span></span>
<span id="cb25-105"><a href="#cb25-105" tabindex="-1"></a><span class="co">#&gt; Starting target_embeds_inP  -- add_target =  TRUEtarget_embeds_inP: 0.099 sec elapsed</span></span>
<span id="cb25-106"><a href="#cb25-106" tabindex="-1"></a><span class="co">#&gt; Starting embeds_in_targetP  -- add_target =  TRUEembeds_in_targetP: 0.079 sec elapsed</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="co"># Note that get_neighborsP excludes rhymes. If you do not want to </span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="co"># track rhymes separately and want neighborsP to include all </span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="co"># rhymes that are not cohorts, you can create new fields that </span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="co"># combine them, as we do here, creating &quot;Pr&quot; versions</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>target_df<span class="sc">$</span>neighborsPr_num <span class="ot">=</span> target_df<span class="sc">$</span>neighborsP_num <span class="sc">+</span> target_df<span class="sc">$</span>rhymes_num</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>target_df<span class="sc">$</span>neighborsPr_fwcp <span class="ot">=</span> target_df<span class="sc">$</span>neighborsP_fwcp <span class="sc">+</span> target_df<span class="sc">$</span>rhymes_fwcp</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>target_df<span class="sc">$</span>neighborsPr_fwt <span class="ot">=</span> target_df<span class="sc">$</span>neighborsP_fwt <span class="sc">+</span> target_df<span class="sc">$</span>rhymes_fwt</span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a><span class="co"># Now let&#39;s streamline the dataframe; we&#39;ll select the num, fwt, and fwcp</span></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="co"># columns and put them in that order, while not keeping some of the other</span></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a><span class="co"># &#39;helper&#39; columns we created</span></span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a>export_df <span class="ot">&lt;-</span> target_df <span class="sc">%&gt;%</span> </span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a>  <span class="fu">select</span>(Item <span class="sc">|</span> Pronunciation <span class="sc">|</span> Frequency </span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a>         <span class="sc">|</span> <span class="fu">ends_with</span>(<span class="st">&quot;_num&quot;</span>) <span class="sc">|</span> <span class="fu">ends_with</span>(<span class="st">&quot;_fwt&quot;</span>) <span class="sc">|</span> <span class="fu">ends_with</span>(<span class="st">&quot;_fwcp&quot;</span>))</span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a><span class="fu">glimpse</span>(export_df)</span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a><span class="co">#&gt; Rows: 212</span></span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a><span class="co">#&gt; Columns: 39</span></span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a><span class="co">#&gt; $ Item                   &lt;chr&gt; &quot;ad&quot;, &quot;ar&quot;, &quot;ark&quot;, &quot;art&quot;, &quot;art^st&quot;, &quot;bab&quot;, &quot;bab…</span></span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a><span class="co">#&gt; $ Pronunciation          &lt;chr&gt; &quot;AA D&quot;, &quot;AA R&quot;, &quot;AA R K&quot;, &quot;AA R T&quot;, &quot;AA R T AH …</span></span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a><span class="co">#&gt; $ Frequency              &lt;int&gt; 53, 4406, 50, 274, 112, 45, 23, 341, 87, 125, 1…</span></span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a><span class="co">#&gt; $ cohorts_num            &lt;int&gt; 1, 4, 4, 4, 4, 7, 7, 7, 7, 7, 7, 7, 3, 3, 3, 3,…</span></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a><span class="co">#&gt; $ neighbors_num          &lt;int&gt; 4, 8, 6, 5, 1, 4, 4, 2, 1, 7, 5, 1, 7, 5, 8, 3,…</span></span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a><span class="co">#&gt; $ rhymes_num             &lt;int&gt; 3, 5, 4, 3, 1, 2, 2, 1, 1, 5, 4, 1, 6, 3, 4, 3,…</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a><span class="co">#&gt; $ homoforms_num          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a><span class="co">#&gt; $ target_embeds_in_num   &lt;int&gt; 6, 29, 5, 9, 1, 2, 1, 1, 1, 2, 1, 1, 5, 1, 1, 1…</span></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="co">#&gt; $ embeds_in_target_num   &lt;int&gt; 1, 1, 2, 2, 5, 1, 3, 2, 1, 2, 4, 2, 1, 3, 3, 2,…</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a><span class="co">#&gt; $ nohorts_num            &lt;int&gt; 1, 3, 3, 3, 1, 3, 3, 2, 1, 3, 2, 1, 2, 2, 3, 1,…</span></span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a><span class="co">#&gt; $ cohortsP_num           &lt;int&gt; 0, 1, 1, 1, 3, 4, 4, 5, 6, 4, 5, 6, 1, 1, 0, 2,…</span></span>
<span id="cb26-32"><a href="#cb26-32" tabindex="-1"></a><span class="co">#&gt; $ neighborsP_num         &lt;int&gt; 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0,…</span></span>
<span id="cb26-33"><a href="#cb26-33" tabindex="-1"></a><span class="co">#&gt; $ target_embeds_inP_num  &lt;int&gt; 3, 21, 1, 5, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0…</span></span>
<span id="cb26-34"><a href="#cb26-34" tabindex="-1"></a><span class="co">#&gt; $ embeds_in_targetP_num  &lt;int&gt; 0, 0, 0, 0, 2, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0,…</span></span>
<span id="cb26-35"><a href="#cb26-35" tabindex="-1"></a><span class="co">#&gt; $ neighborsPr_num        &lt;int&gt; 4, 6, 4, 3, 1, 2, 2, 1, 1, 5, 4, 1, 6, 4, 6, 3,…</span></span>
<span id="cb26-36"><a href="#cb26-36" tabindex="-1"></a><span class="co">#&gt; $ cohorts_fwt            &lt;dbl&gt; 3.970292, 22.634373, 22.634373, 22.634373, 22.6…</span></span>
<span id="cb26-37"><a href="#cb26-37" tabindex="-1"></a><span class="co">#&gt; $ neighbors_fwt          &lt;dbl&gt; 21.533445, 37.968634, 33.688446, 27.349358, 4.7…</span></span>
<span id="cb26-38"><a href="#cb26-38" tabindex="-1"></a><span class="co">#&gt; $ rhymes_fwt             &lt;dbl&gt; 13.142723, 24.473191, 19.684596, 15.046612, 4.7…</span></span>
<span id="cb26-39"><a href="#cb26-39" tabindex="-1"></a><span class="co">#&gt; $ homoforms_fwt          &lt;dbl&gt; 3.970292, 8.390723, 3.912023, 5.613128, 4.71849…</span></span>
<span id="cb26-40"><a href="#cb26-40" tabindex="-1"></a><span class="co">#&gt; $ target_embeds_in_fwt   &lt;dbl&gt; 29.792782, 127.685319, 22.680328, 42.517044, 4.…</span></span>
<span id="cb26-41"><a href="#cb26-41" tabindex="-1"></a><span class="co">#&gt; $ embeds_in_target_fwt   &lt;dbl&gt; 3.970292, 8.390723, 12.302746, 14.003851, 35.28…</span></span>
<span id="cb26-42"><a href="#cb26-42" tabindex="-1"></a><span class="co">#&gt; $ nohorts_fwt            &lt;dbl&gt; 3.970292, 17.915874, 17.915874, 17.915874, 4.71…</span></span>
<span id="cb26-43"><a href="#cb26-43" tabindex="-1"></a><span class="co">#&gt; $ cohortsP_fwt           &lt;dbl&gt; 0.000000, 4.718499, 4.718499, 4.718499, 17.9158…</span></span>
<span id="cb26-44"><a href="#cb26-44" tabindex="-1"></a><span class="co">#&gt; $ neighborsP_fwt         &lt;dbl&gt; 8.390723, 3.970292, 0.000000, 0.000000, 0.00000…</span></span>
<span id="cb26-45"><a href="#cb26-45" tabindex="-1"></a><span class="co">#&gt; $ target_embeds_inP_fwt  &lt;dbl&gt; 16.650059, 88.968478, 2.995732, 22.751933, 0.00…</span></span>
<span id="cb26-46"><a href="#cb26-46" tabindex="-1"></a><span class="co">#&gt; $ embeds_in_targetP_fwt  &lt;dbl&gt; 0.000000, 0.000000, 0.000000, 0.000000, 16.5642…</span></span>
<span id="cb26-47"><a href="#cb26-47" tabindex="-1"></a><span class="co">#&gt; $ neighborsPr_fwt        &lt;dbl&gt; 21.533445, 28.443483, 19.684596, 15.046612, 4.7…</span></span>
<span id="cb26-48"><a href="#cb26-48" tabindex="-1"></a><span class="co">#&gt; $ cohorts_fwcp           &lt;dbl&gt; 1.00000000, 0.37070710, 0.17283550, 0.24799133,…</span></span>
<span id="cb26-49"><a href="#cb26-49" tabindex="-1"></a><span class="co">#&gt; $ neighbors_fwcp         &lt;dbl&gt; 0.1843779, 0.2209909, 0.1161236, 0.2052380, 1.0…</span></span>
<span id="cb26-50"><a href="#cb26-50" tabindex="-1"></a><span class="co">#&gt; $ rhymes_fwcp            &lt;dbl&gt; 0.3020905, 0.3428536, 0.1987352, 0.3730493, 1.0…</span></span>
<span id="cb26-51"><a href="#cb26-51" tabindex="-1"></a><span class="co">#&gt; $ homoforms_fwcp         &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span id="cb26-52"><a href="#cb26-52" tabindex="-1"></a><span class="co">#&gt; $ target_embeds_in_fwcp  &lt;dbl&gt; 0.13326355, 0.06571407, 0.17248529, 0.13202066,…</span></span>
<span id="cb26-53"><a href="#cb26-53" tabindex="-1"></a><span class="co">#&gt; $ embeds_in_target_fwcp  &lt;dbl&gt; 1.0000000, 1.0000000, 0.3179797, 0.4008275, 0.1…</span></span>
<span id="cb26-54"><a href="#cb26-54" tabindex="-1"></a><span class="co">#&gt; $ nohorts_fwcp           &lt;dbl&gt; 1.0000000, 0.4683401, 0.2183551, 0.3133047, 1.0…</span></span>
<span id="cb26-55"><a href="#cb26-55" tabindex="-1"></a><span class="co">#&gt; $ cohortsP_fwcp          &lt;dbl&gt; 1.0000000, 0.6400626, 0.4532777, 0.5432957, 0.2…</span></span>
<span id="cb26-56"><a href="#cb26-56" tabindex="-1"></a><span class="co">#&gt; $ neighborsP_fwcp        &lt;dbl&gt; 0.3211947, 0.6788053, 1.0000000, 1.0000000, 1.0…</span></span>
<span id="cb26-57"><a href="#cb26-57" tabindex="-1"></a><span class="co">#&gt; $ target_embeds_inP_fwcp &lt;dbl&gt; 0.19254240, 0.08618315, 0.56632333, 0.19788881,…</span></span>
<span id="cb26-58"><a href="#cb26-58" tabindex="-1"></a><span class="co">#&gt; $ embeds_in_targetP_fwcp &lt;dbl&gt; 1.0000000, 1.0000000, 1.0000000, 1.0000000, 0.2…</span></span>
<span id="cb26-59"><a href="#cb26-59" tabindex="-1"></a><span class="co">#&gt; $ neighborsPr_fwcp       &lt;dbl&gt; 0.6232852, 1.0216590, 1.1987352, 1.3730493, 2.0…</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
